<<<<<<< HEAD
---
title: a^b对p取模
toc: true
cover: /img/4.jpg
categories:
  - 算法进阶指南
tags:
  - 位运算
  - 快速幂
abbrlink: 2681
date: 2021-10-03 22:08:07
---

### 题目描述

求 a 的 b次方对 p 取模的值。<!-- more -->

#### 输入格式

三个整数 a,b,p在同一行用空格隔开。

#### 输出格式

输出一个整数，表示`a^b mod p`的值。

#### 数据范围

0≤ a,b ≤10^9 
1≤ p ≤ 10^9     

#### 输入样例：

```
3 2 7
```

#### 输出样例：

```
2
```

### **题解**

1. 首先如果a,b均取最大值，则一定会发生long long 64位溢出

2. 其次，有如下公式

   * (a*b) % p  == ( (a%p) * (b%p) ) % p
   * (a + b) % p == ( (a % p) + b ) % p

3. 同时，我们把b写成二进制形式，会有以下效果：

   ![图](/img/sf01.jpg)
   
4. 这就意味着，a从其本身值开始，每经历一次对b的每一位系数(c<sub>i<sub>)是否是1的判断后，a都会再乘以本身，即  a *= a;

   比如：  第一次 a , 第二次a^2,第三次a^4,...

### 参考代码

```java
#include<iostream>
using namespace std;
long long func(long long a  ,long long b, int p){
   long long ans = 1 % p ;  # 注意对ans进行初始化，如果b = 0 ，则最后结果为1
   do{
       if(b & 1){
           ans = ans * a % p;
       }
       a = (long long)a*a % p;
   }while(b >>= 1);
    return ans;
}
int main(){
   long long a , b, p ;
   cin >> a >> b >> p ;
   cout<<func(a,b,p);
    return 0 ;
}
```



=======
---
title: a^b对p取模
toc: true
cover: /img/4.jpg
categories:
  - 算法进阶指南
tags:
  - 位运算
  - 快速幂
abbrlink: 2681
date: 2021-10-03 22:08:07
---

### 题目描述

求 a 的 b次方对 p 取模的值。<!-- more -->

#### 输入格式

三个整数 a,b,p在同一行用空格隔开。

#### 输出格式

输出一个整数，表示`a^b mod p`的值。

#### 数据范围

0≤ a,b ≤10^9 
1≤ p ≤ 10^9     

#### 输入样例：

```
3 2 7
```

#### 输出样例：

```
2
```

### **题解**

1. 首先如果a,b均取最大值，则一定会发生long long 64位溢出

2. 其次，有如下公式

   * (a*b) % p  == ( (a%p) * (b%p) ) % p
   * (a + b) % p == ( (a % p) + b ) % p

3. 同时，我们把b写成二进制形式，会有以下效果：

   ![图](/img/sf01.jpg)
   
4. 这就意味着，a从其本身值开始，每经历一次对b的每一位系数(c<sub>i<sub>)是否是1的判断后，a都会再乘以本身，即  a *= a;

   比如：  第一次 a , 第二次a^2,第三次a^4,...

### 参考代码

```java
#include<iostream>
using namespace std;
long long func(long long a  ,long long b, int p){
   long long ans = 1 % p ;  # 注意对ans进行初始化，如果b = 0 ，则最后结果为1
   do{
       if(b & 1){
           ans = ans * a % p;
       }
       a = (long long)a*a % p;
   }while(b >>= 1);
    return ans;
}
int main(){
   long long a , b, p ;
   cin >> a >> b >> p ;
   cout<<func(a,b,p);
    return 0 ;
}
```



>>>>>>> 725fcb7a857252b3986fe8e21eadbeb0e3e3ddc6
