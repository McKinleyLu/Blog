---
title: 堆
categories:
  - 基础算法
tags:
  - 模拟栈
  - week2
abbrlink: 21992
date: 2022-03-02 19:39:00
---
### 堆
特殊的二叉树，实质为优先队列
#### 小根堆
一个点的值小于他的左右孩子节点。
#### 堆的存储
使用数组法存储堆
节点i,左孩子2*i,右孩子2*i+1
从1开始使用空间
#### 基本操作
1. down(x)节点向下调整
   ```java
    void down(x){
        int t  = u ;
        if(u * 2 <= size && heap[u*2] < heap[t]) t = u * 2;
        if(u * 2 + 1 <= size && heap[u*2+1] < heap[t]) t = u * 2 + 1;
        if( u != t){
            swap(heap[u],heap[t]);
            down(t);
        }
    }
   ```
2. up(x)节点向上调整
   ```java
   void up(int u){
    while( u / 2 && heap[u / 2] > heap[u] ){
        swap(heap[u/2],heap[u]);
        u /= 2 ;
    }
   }
   ```
3. 插入操作
   ```java
   heap[++size] = x , up(size)
   ```
4. 删除最小值
   * 用整个堆的最后一个元素，覆盖堆顶元素
   * 因为删除尾节点(即一维数组中删除一个元素)，只需要size--
   * ```java
     heap[1] = heap[size],size--,down(1);
     ```
5.  删除任意元素
    ```java
    heap[k] = heap[size], size--,down(k),up(k);
    ```
6. 修改任意元素
   ```java
   heap[k] = x ,down(k),up(k);
   ```
7. 取出最小元素
   ```java
   heap[1] ;
   ```
