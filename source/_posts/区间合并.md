---
title: 区间合并
categories:
  - 基础算法
  - week1
tags:
  - 区间合并
  - c++
abbrlink: 6974
date: 2021-10-21 19:37:56
---

### 区间合并

快速的把n个有交集的区间进行合并。<!-- more -->

如下图所示，最终黑色的几个区间，合成了两个绿色的区间

![picture](/img/jcsf7.jpg)

### 区间三种情况

1. 一个区间在另一个区间内部
2. 一个区间与另一个区间有重合
3. 两个区间没有重合

### 合并方法

* 首先按照区间左端点排序
* 两个区间有三种关系，如下图四个线段表示，第一个线段为原线段

![picture](/img/jcsf8.jpg)

### 代码思路

首先设置两个边界区间，st  = -(1e5+10)  , ed = -(1e5+10)

接下来我们在循环中依次判断三种情况：

* 如果无法合并，则把第一个区间(前面的区间，不是当前区间)加入到ans中，同时维护第二个区间(当前区间)，将它的区间边界赋值给`st`和`ed`(注意，初始的-1e5区间不可以进入哦）
* 如果可以合并，即第二个区间在第一个区间内部，或者第二个区间和第一个区间有交集，则进入else合并
* 循环最后还剩着第二个区间没有加入到ans中m,最后加入一下即可(此条结合第一条看即可)

### 题目描述

给定 n 个区间 [li,ri]，要求合并所有有交集的区间。

注意如果在端点处相交，也算有交集。

输出合并完成后的区间个数。

例如：[1,3] 和 [2,6] 可以合并为一个区间 [1,6] 

### 输入格式

第一行包含整数n。

接下来nn行，每行包含两个整数l和r。

### 输出格式

共一行，包含一个整数，表示合并区间完成后的区间个数。

### 数据范围

1 ≤ n ≤ 100000,
−10^9 ≤ li ≤ ri ≤10^9

### 输入样例

```java
5
1 2
2 4
5 6
7 8
7 9
```

### 输出样例

```java
3
```

### 参考代码

```java
//2022.3.1 复习
#include <iostream>
#include <vector>
#include <algorithm>
using namespace std ;
const int N = 1e5;
typedef pair<int,int> PII ;
vector<PII> eg,ans;
int n ;
int merge(){
    int st = - N , ed = -N ;
    sort(eg.begin(),eg.end());
    if(eg.size() == 0) return 0 ;
    if(eg.size() == 1) return 1 ;
    for(int i = 1 ; i <= n ; ++i){
        if(ed < eg[i].first){
            if(st != -N){ans.push_back({st,ed});}
            st = eg[i].first , ed = eg[i].second;
        }
        else{
            ed = max(ed,eg[i].second);
        }
    }
    return ans.size();
}
int main(int argc, char const *argv[])
{
    cin >> n ;
    for(int i = 1 ; i <= n ;++i){
        int l , r ;
        cin >> l >> r ;
        eg.push_back({l,r});
    }
    cout << merge() << endl;
    return 0;
}
```

